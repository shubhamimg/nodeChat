<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp,container-queries"></script>
    <title>Write New Chat</title>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              clifford: "#da373d",
            },
          },
        },
      };
    </script>
    <style type="text/tailwindcss">
      @layer utilities {
        .content-auto {
          content-visibility: auto;
        }
      }
    </style>
    <title>Mini Whatsapp</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h3>All Chats</h3>
    
    <div class="">
        <form method="GET" action="/chats/new">
            <button>
                New Chat
            </button>
        </form>
    </div>
    <% for ( let chat of chats) { %>
        <div class="chats">
            <div class="">
                <div>From: <%= chat.from %></div>
            </div>
            <div class="msg">
                <div>
                    <%= chat.msg %>
                </div>
            </div>
            <div class="">
                <div>
                    Recevied by: <%= chat.to %>
                </div>
            </div>
            <hr/>
            <p>
                <%= chat.created_at.toString().split(" ")[4] %>
            </p>
            <div class="text-sm font-semibold text-gray-500 py-2">
                <%= chat.created_at.toString().split(" ").slice(0, 4).join("-") %>
            </div>
            <div class="flex items-center gap-4 justify-end">
                <div class="w-fit">
                    <form method="get" action="/chats/<%= chat._id %>/edit">
                        <button class="*:size-full size-4">
                            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="200px" width="200px" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 21h3.75L17.81 9.94l-3.75-3.75L3 17.25V21zm2-2.92 9.06-9.06.92.92L5.92 19H5v-.92zM18.37 3.29a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34z"></path></svg>
                        </button>
                    </form>
                </div>
                <div class="w-fit">
                    <form method="post" action="/chats/<%= chat._id %>/?_method=DELETE">
                        <button class="*:size-full size-4 text-red-500">
                            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="200px" width="200px" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></svg>
                        </button>
                    </form>
                </div>
                <div class="">
                    <form method="GET" action="/chats/<%= chat.id %>">
                        <button>
                            Show
                        </button>
                    </form>
                </div>
            </div>
        </div>
    <% } %>

</body>
</html>